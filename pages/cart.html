<div class="bg-gray-50">
    <div class="container mx-auto px-4 py-12">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
            <div>
                <button class="nav-link text-secondary hover:underline font-medium flex items-center mb-4" data-page="home">
                    <i class="fas fa-arrow-left mr-2"></i> Voltar para o início
                </button>
                <h1 class="text-3xl md:text-4xl font-bold text-gray-800">Meu Carrinho</h1>
            </div>
            <button id="clear-cart-btn" class="hidden mt-4 md:mt-0 bg-secondary hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2">
                <i class="fas fa-trash-alt"></i> Limpar Tudo
            </button>
        </div>
        <div class="flex flex-col lg:flex-row gap-8">
            <div id="cart-items-container" class="w-full lg:w-2/3 space-y-4"></div>
            <div class="w-full lg:w-1/3">
                <div class="bg-white p-6 rounded-lg shadow-sm sticky top-24">
                    <h2 class="text-xl font-bold text-gray-800 border-b pb-4 mb-4">Resumo do Pedido</h2>
                    <div class="space-y-3 mb-6 text-gray-600">
                        <div class="flex justify-between"><span>Subtotal</span><span id="cart-subtotal">R$ 0,00</span></div>
                        <div id="cart-discount-row" class="hidden flex justify-between text-green-600">
    <span>Desconto</span>
    <span id="cart-discount">- R$ 0,00</span>
</div>

<div class="pt-2 text-center">
    <a href="#" id="coupon-toggle" class="text-sm font-medium text-secondary hover:underline">
        Tem um cupom de desconto?
    </a>
</div>

<div id="coupon-form-container" class="coupon-form-container">
    <div class="flex items-center gap-2 mt-2">
        <input type="text" id="coupon-input" placeholder="Digite seu cupom" class="form-input flex-grow uppercase text-sm" autocomplete="off">
        <button id="apply-coupon-btn" class="bg-secondary hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-md h-full">
            Aplicar
        </button>
    </div>
    <div id="coupon-feedback" class="text-sm h-5 mt-1 text-center"></div>
</div>
                        <div class="flex justify-between items-center">
                            <span>Frete</span>
                            <div class="flex items-center relative">
                                <span id="shipping-error-icon" class="hidden absolute -top-5 left-1/2 -translate-x-1/2 text-red-500 text-xl"><i class="fas fa-exclamation-circle"></i></span>
                                <span id="cart-shipping" class="font-medium"></span>
                                <button id="shipping-info-btn" class="ml-2 w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold cursor-pointer hover:bg-blue-600 transition-colors">i</button>
                            </div>
                        </div>
                        <div class="flex justify-between font-bold text-gray-800 text-lg"><span>Total</span><span id="cart-total">R$ 0,00</span></div>
                    </div>
                    <button id="checkout-btn" class="w-full bg-primary hover:bg-orange-700 text-white py-3 rounded-lg font-bold transition duration-300">Finalizar Compra</button>
                    <button class="nav-link w-full text-secondary hover:underline mt-4 font-medium" data-page="home">Continuar comprando</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="shipping-modal" class="modal hidden">
    <div class="modal-content relative">
        <span class="modal-close">×</span>
        <h2 class="text-2xl font-bold mb-4 text-center text-gray-800">Calcular Taxa de Entrega</h2>
        <p class="text-center text-gray-500 mb-6 text-sm">Digite seu CEP para calcular o frete e ver o endereço de entrega.</p>
        
        <div id="cep-form-container">
            <div class="flex items-center gap-2 mb-2">
                <input type="tel" id="cep-input" placeholder="Digite seu CEP (só números)" class="form-input flex-grow" maxlength="8">
                <button id="cep-search-btn" class="bg-primary hover:bg-orange-700 text-white font-bold py-2 px-4 rounded-md h-full flex items-center justify-center">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <div id="cep-feedback" class="text-sm h-5"></div> </div>

        <div id="address-result-container" class="hidden mt-4 space-y-3">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                <div class="md:col-span-2">
                    <label class="form-label">Rua</label>
                    <input type="text" id="address-street" class="form-input bg-gray-100" readonly>
                </div>
                <div>
                    <label class="form-label">Número</label>
                    <input type="text" id="address-number" class="form-input" placeholder="Ex: 123">
                </div>
            </div>
            <div>
                <label class="form-label">Bairro</label>
                <input type="text" id="address-neighborhood" class="form-input bg-gray-100" readonly>
            </div>
            <div>
                <label class="form-label">Complemento (Opcional)</label>
                <input type="text" id="address-complement" class="form-input" placeholder="Ex: Apto 404">
            </div>
            
            <div id="calculated-fee-container" class="bg-teal-50 border-l-4 border-secondary text-secondary p-4 rounded-md mt-4">
                <div class="flex items-center justify-between">
                    <p class="font-bold">Taxa de Entrega:</p>
                    <p id="calculated-fee" class="text-lg font-bold">R$ 0,00</p>
                </div>
            </div>
             <div id="unsupported-area-message" class="hidden bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md mt-4">
                <p class="font-bold">Bairro não atendido</p>
                <p>No momento, não realizamos entregas para esta região. <a href="#" class="underline">Fale conosco</a>.</p>
            </div>

            <button id="confirm-shipping-btn" class="w-full bg-secondary hover:bg-teal-700 text-white py-3 rounded-lg font-bold transition duration-300 mt-4">Confirmar Endereço e Frete</button>
        </div>
    </div>
</div>

